### Важно ⚠️
Версия парсера из репозитории не соответствует версии в текущем API.

## BashOrg-quotes-api
Простой парсер цитат с башорга

*Пример использования*


`quotes = Quotes()`  -  инициализация.

Необязательные параметры класса:

- `use_cache: bool` - нужно ли использовать *in-memory* кэширование для цитат. По умолчанию `True`.

- `cache_limit: int` - лимит на количество цитат в кэше. По умолчанию `100`. 
При превышении лимита срезается ровно половина цитат (старых) из кэша.

Кэш используется только в случае, если кол-во цитат в нем достигает хотя бы 20% лимита. Например, когда лимит установлен на 100 цитат - кэш будет использоваться только если в нем содержится 20 и больше цитат.

**Класс имеет всего один основной метод с опциональным параметром**

`quotes.new_quote()` - вернет список с ID, датой и текстом (`[quote_id, quote_date, quote_text]`) случайной цитаты в случае успеха или пустой список в случае, если сервер вернёт что-то иное.

`quotes.new_quote(<id>)` - вернет тот же список, но уже для конкретной цитаты с указанным ID.

### Роуты
Всего два

*Примеры запросов*

Запрос `GET /quote?id=<id>` *(для прмера - 464666)*

Ответ:
`{"ok":true,"result":{"quote":{"id":"464666","date":"23.02.2021","text":"Фотка деревенской колонки для воды.\n\nКакой-то приколист нарисовал на ней значок вай фая и написал 5G.\n\nxxx: Я себе так два терабайта накачал, хорошая вещь."}}}`

Запрос `GET /random-quote`

Ответ:
`{"ok":true,"result":{"quote":{"id":"418737","date":"04.09.2012","text":"GreenQ 21:55:57: сегодня соседи в 9 утра сверлили стену\nGreenQ 21:56:18: причем вот они ее в 9 утра посверлили и успокоились, потом весь день тихо было\nGreenQ 21:57:26: пойду на скрипке поиграю...."}}}`



На этом всё. Баги, недочёты, вопросы - в issues.


Написано с помощью [StackEdit](https://stackedit.io)